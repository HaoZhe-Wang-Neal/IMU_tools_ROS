<launch>


  <!-- 滑动窗口大小（帧） -->
  <arg name="window_size" default="10" doc="Sliding window size for IMU cleaning (1-100)"/>
  <!-- 标准差阈值（超过则判定为异常值） -->
  <arg name="std_threshold" default="0.1" doc="STD threshold for outlier detection (0.01-1.0)"/>
  <!-- 陀螺仪单位是否转deg/s（默认rad/s） -->
  <arg name="gyro_to_deg" default="false" doc="Convert gyro from rad/s to deg/s (true/false)"/>
  <!-- 订阅的原始IMU话题 -->
  <arg name="imu_raw_topic" default="/imu/data_raw" doc="Raw IMU data topic"/>
  <!-- 发布的清洗后IMU话题 -->
  <arg name="imu_clean_topic" default="/imu/data_clean" doc="Cleaned IMU data topic"/>
  <!-- 订阅队列大小（适配高频IMU） -->
  <arg name="queue_size" default="100" doc="Subscriber queue size (for high-frequency IMU)"/>

  <param name="/use_sim_time" value="true"/>




  <!-- C++节点启动（二选一） -->
  <node 
    name="imu_clean_cpp_node" 
    pkg="imu_clean" 
    type="imu_clean_node" 
    output="screen"
    required="true">
    <remap from="~imu_raw" to="$(arg imu_raw_topic)"/>
    <remap from="~imu_clean" to="$(arg imu_clean_topic)"/>
    <!-- 初始参数配置 -->
    <param name="window_size" value="$(arg window_size)"/>
    <param name="std_threshold" value="$(arg std_threshold)"/>
    <param name="gyro_to_deg" value="$(arg gyro_to_deg)"/>
    <param name="queue_size" value="$(arg queue_size)"/>
  </node>

  <!-- Python节点启动（二选一） -->
  <!--
  <node 
    name="imu_clean_py_node" 
    pkg="imu_clean" 
    type="imu_clean_node.py" 
    output="screen"
    required="true">
    <remap from="~imu_raw" to="$(arg imu_raw_topic)"/>
    <remap from="~imu_clean" to="$(arg imu_clean_topic)"/>
    <param name="window_size" value="$(arg window_size)"/>
    <param name="std_threshold" value="$(arg std_threshold)"/>
    <param name="gyro_to_deg" value="$(arg gyro_to_deg)"/>
    <param name="queue_size" value="$(arg queue_size)"/>
  </node>
  -->
</launch>